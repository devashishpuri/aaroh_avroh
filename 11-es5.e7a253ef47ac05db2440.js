function _classCallCheck(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,a){for(var e=0;e<a.length;e++){var r=a[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,a,e){return a&&_defineProperties(t.prototype,a),e&&_defineProperties(t,e),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{nZBp:function(t,a,e){"use strict";e.r(a),e.d(a,"PreviewPageModule",(function(){return L}));var r=e("ofXK"),n=e("3Pt+"),i=e("TEn/"),o=e("tyNb"),s=e("mrSG"),l=e("gcOT"),c=e("9qQK"),b=e("fXoL"),h=e("LEUy");function u(t,a){if(1&t&&(b.Mb(0,"span",11),b.kc(1),b.Lb()),2&t){var e=a.$implicit,r=a.index,n=b.Wb().$implicit;b.zb(1),b.mc(" ",e+(r!=n.length-1?" ":"")," ")}}function p(t,a){if(1&t&&(b.Mb(0,"ion-item"),b.Mb(1,"ion-label",8),b.ic(2,u,2,1,"span",9),b.Mb(3,"strong",10),b.kc(4,","),b.Lb(),b.Lb(),b.Lb()),2&t){var e=a.$implicit;b.zb(2),b.bc("ngForOf",e)}}function f(t,a){if(1&t&&(b.Mb(0,"span",11),b.kc(1),b.Lb()),2&t){var e=a.$implicit,r=a.index,n=b.Wb().$implicit;b.zb(1),b.mc(" ",e+(r!=n.length-1?" ":"")," ")}}function v(t,a){if(1&t&&(b.Mb(0,"ion-item"),b.Mb(1,"ion-label",8),b.ic(2,f,2,1,"span",9),b.Mb(3,"strong",10),b.kc(4,","),b.Lb(),b.Lb(),b.Lb()),2&t){var e=a.$implicit;b.zb(2),b.bc("ngForOf",e)}}function k(t,a){if(1&t){var e=b.Nb();b.Mb(0,"ion-fab",12),b.Mb(1,"ion-button",13),b.Ub("click",(function(){return b.fc(e),b.Wb().save()})),b.Kb(2,"ion-icon",14),b.kc(3," Save "),b.Lb(),b.Lb()}}var g,d,m,w=l.a.Share,M=[{path:"",component:(g=function(){function t(a,e,r,n,i,o){var s=this;_classCallCheck(this,t),this.route=a,this.router=e,this.nav=r,this.alankarService=n,this.storageService=i,this.alertController=o,this.avroh=[],this.aaroh=[],this.alreadySaved=!1,this.route.queryParams.subscribe((function(t){if(s.router.getCurrentNavigation().extras.state){var a=s.router.getCurrentNavigation().extras.state.saved;s.alreadySaved=a||!1,s.alankar=s.router.getCurrentNavigation().extras.state.alankarPhrase}else{if(!t.phrase)return void s.router.navigate(["/home"]);s.alankar={phrase:t.phrase.split(","),rootSwara:t.rootSwara||c.b[0],lastSwara:t.lastSwara||c.a[0],thaat:+(t.thaat||c.f.Bilaval),title:t.title,vargitSwaras:(t.vargitSwaras||"").split(",")}}s.title=s.alankar.title||s.alankar.phrase.join(", "),s.preparePhrases()}))}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"preparePhrases",value:function(){var t=this.alankarService.getAlankar(this.alankar.phrase,this.alankar.rootSwara,this.alankar.lastSwara,this.alankar.thaat,this.alankar.vargitSwaras);this.aaroh=t.aaroh,this.avroh=t.avroh}},{key:"share",value:function(){var t=this.alankar.phrase.join(", "),a="https://devashishpuri.github.io/aaroh_avroh/home/?phrase=".concat(this.alankar.phrase,"&thaat=").concat(this.alankar.thaat,"&rootSwara=").concat(this.alankar.rootSwara,"&lastSwara=").concat(this.alankar.lastSwara,"&vargitSwaras=").concat(this.alankar.vargitSwaras);this.alankar.title&&(a+="&title="+this.alankar.title),w.share({title:this.alreadySaved?this.alankar.title:t,text:"View this alankar on the Alankar app",url:encodeURI(a),dialogTitle:this.alreadySaved?this.alankar.title:t})}},{key:"save",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var a,e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=this.alankar.phrase.join(", "),t.next=3,this.getTitle(this.alankar.title);case 3:if(e=t.sent,t.t0=e||""===e,!t.t0){t.next=9;break}return t.next=8,this.storageService.saveAlankar(Object.assign(Object.assign({},this.alankar),{title:e||a,date:(new Date).getTime()}));case 8:this.nav.navigateRoot("/saved");case 9:case"end":return t.stop()}}),t,this)})))}},{key:"getTitle",value:function(t){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var e=this;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise((function(a,r){return Object(s.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({cssClass:"alankar-title",header:"Alankar Name",inputs:[{name:"title",type:"text",placeholder:"Name your Alankar",value:t}],buttons:[{text:"Cancel",role:"cancel",handler:function(){a(null)}},{text:"Save",handler:function(t){r.dismiss(),a(t.title||"")}}]});case 2:return r=e.sent,e.next=5,r.present();case 5:case"end":return e.stop()}}),e,this)})))})));case 1:case"end":return a.stop()}}),a)})))}}]),t}(),g.\u0275fac=function(t){return new(t||g)(b.Jb(o.a),b.Jb(o.i),b.Jb(i.G),b.Jb(h.a),b.Jb(h.c),b.Jb(i.a))},g.\u0275cmp=b.Db({type:g,selectors:[["app-preview"]],decls:26,vars:7,consts:[[3,"translucent"],["slot","start"],[1,"preview-page",3,"fullscreen","scrollX"],[1,"phrase-title"],[4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","edge","","slot","fixed",4,"ngIf"],[3,"click"],["slot","start","name","share-social"],[1,"ion-text-wrap"],["class","phrase-swara",4,"ngFor","ngForOf"],[1,"phrase-delimeter"],[1,"phrase-swara"],["vertical","bottom","horizontal","end","edge","","slot","fixed"],[1,"fab-button",3,"click"],["slot","start","name","checkmark"]],template:function(t,a){1&t&&(b.Mb(0,"ion-header",0),b.Mb(1,"ion-toolbar"),b.Mb(2,"ion-buttons",1),b.Kb(3,"ion-back-button"),b.Lb(),b.Mb(4,"ion-title"),b.kc(5),b.Lb(),b.Lb(),b.Lb(),b.Mb(6,"ion-content",2),b.Mb(7,"ion-list"),b.Mb(8,"ion-list-header"),b.Mb(9,"ion-label"),b.Mb(10,"span",3),b.kc(11,"Aaroh"),b.Lb(),b.Lb(),b.Lb(),b.ic(12,p,5,1,"ion-item",4),b.Lb(),b.Mb(13,"ion-list"),b.Mb(14,"ion-list-header"),b.Mb(15,"ion-label"),b.Mb(16,"span",3),b.kc(17,"Avroh"),b.Lb(),b.Lb(),b.Lb(),b.ic(18,v,5,1,"ion-item",4),b.Lb(),b.ic(19,k,4,0,"ion-fab",5),b.Lb(),b.Mb(20,"ion-footer"),b.Mb(21,"ion-toolbar"),b.Mb(22,"ion-buttons",1),b.Mb(23,"ion-button",6),b.Ub("click",(function(){return a.share()})),b.Kb(24,"ion-icon",7),b.kc(25," Share "),b.Lb(),b.Lb(),b.Lb(),b.Lb()),2&t&&(b.bc("translucent",!0),b.zb(5),b.lc(a.title||"Alankar Preview"),b.zb(1),b.bc("fullscreen",!0)("scrollX",!0),b.zb(6),b.bc("ngForOf",a.aaroh),b.zb(6),b.bc("ngForOf",a.avroh),b.zb(1),b.bc("ngIf",!a.alreadySaved))},directives:[i.m,i.D,i.h,i.e,i.f,i.B,i.j,i.q,i.r,i.p,r.j,r.k,i.l,i.g,i.n,i.o,i.k],styles:[".phrase-title[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-size:large;font-weight:700}.ion-text-wrap[_ngcontent-%COMP%], .phrase-swara[_ngcontent-%COMP%]{white-space:pre-wrap}.phrase-swara[_ngcontent-%COMP%]:first-of-type{margin-left:-3px}ion-item[_ngcontent-%COMP%]:last-child   .phrase-delimeter[_ngcontent-%COMP%]{display:none}ion-content[_ngcontent-%COMP%]::part(scroll){margin-bottom:32px}ion-fab[_ngcontent-%COMP%]{width:120px;right:8px;bottom:-16px}ion-fab[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]::part(native){border-radius:32px;padding:24px}"]}),g)},{path:"**",redirectTo:""}],C=((m=function t(){_classCallCheck(this,t)}).\u0275mod=b.Hb({type:m}),m.\u0275inj=b.Gb({factory:function(t){return new(t||m)},imports:[[o.k.forChild(M)],o.k]}),m),L=((d=function t(){_classCallCheck(this,t)}).\u0275mod=b.Hb({type:d}),d.\u0275inj=b.Gb({factory:function(t){return new(t||d)},imports:[[r.b,n.a,i.E,C]]}),d)}}]);
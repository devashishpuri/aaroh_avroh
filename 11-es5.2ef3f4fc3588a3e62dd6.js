function _classCallCheck(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}}function _createClass(a,t,e){return t&&_defineProperties(a.prototype,t),e&&_defineProperties(a,e),a}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{nZBp:function(a,t,e){"use strict";e.r(t),e.d(t,"PreviewPageModule",(function(){return C}));var r=e("ofXK"),n=e("3Pt+"),i=e("TEn/"),o=e("tyNb"),s=e("mrSG"),c=e("gcOT"),l=e("9qQK"),b=e("fXoL"),h=e("LEUy");function u(a,t){if(1&a&&(b.Mb(0,"span",10),b.kc(1),b.Lb()),2&a){var e=t.$implicit;b.zb(1),b.mc(" ",e," ")}}function p(a,t){if(1&a&&(b.Mb(0,"ion-item"),b.ic(1,u,2,1,"span",8),b.Mb(2,"span",9),b.kc(3,","),b.Lb(),b.Lb()),2&a){var e=t.$implicit;b.zb(1),b.bc("ngForOf",e)}}function f(a,t){if(1&a&&(b.Mb(0,"span",10),b.kc(1),b.Lb()),2&a){var e=t.$implicit;b.zb(1),b.mc(" ",e," ")}}function v(a,t){if(1&a&&(b.Mb(0,"ion-item"),b.ic(1,f,2,1,"span",8),b.Mb(2,"span",9),b.kc(3,","),b.Lb(),b.Lb()),2&a){var e=t.$implicit;b.zb(1),b.bc("ngForOf",e)}}function k(a,t){if(1&a){var e=b.Nb();b.Mb(0,"ion-fab",11),b.Mb(1,"ion-button",12),b.Ub("click",(function(){return b.fc(e),b.Wb().save()})),b.Kb(2,"ion-icon",13),b.kc(3," Save "),b.Lb(),b.Lb()}}var d,g,m,w=c.a.Share,M=[{path:"",component:(d=function(){function a(t,e,r,n,i,o){var s=this;_classCallCheck(this,a),this.route=t,this.router=e,this.nav=r,this.alankarService=n,this.storageService=i,this.alertController=o,this.avroh=[],this.aaroh=[],this.alreadySaved=!1,this.route.queryParams.subscribe((function(a){if(s.router.getCurrentNavigation().extras.state){var t=s.router.getCurrentNavigation().extras.state.saved;s.alreadySaved=t||!1,s.alankar=s.router.getCurrentNavigation().extras.state.alankarPhrase}else{if(!a.phrase)return void s.router.navigate(["/home"]);s.alankar={phrase:a.phrase.split(","),rootSwara:a.rootSwara||l.b[0],lastSwara:a.lastSwara||l.a[0],thaat:+(a.thaat||l.f.Bilaval),title:a.title,vargitSwaras:(a.vargitSwaras||"").split(",")}}s.title=s.alankar.title||s.alankar.phrase.join(", "),s.preparePhrases()}))}return _createClass(a,[{key:"ngOnInit",value:function(){}},{key:"preparePhrases",value:function(){var a=this.alankarService.getAlankar(this.alankar.phrase,this.alankar.rootSwara,this.alankar.lastSwara,this.alankar.thaat,this.alankar.vargitSwaras);this.aaroh=a.aaroh,this.avroh=a.avroh}},{key:"share",value:function(){var a=this.alankar.phrase.join(", ");w.share({title:this.alreadySaved?this.alankar.title:a,text:"View this alankar on the Alankar app",url:"https://devashishpuri.github.io/aaroh_avroh/preview/?phrase=".concat(this.alankar.phrase,"&thaat=").concat(this.alankar.thaat,"&rootSwara=").concat(this.alankar.rootSwara,"&lastSwara=").concat(this.alankar.lastSwara),dialogTitle:this.alreadySaved?this.alankar.title:a})}},{key:"save",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var t,e;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=this.alankar.phrase.join(", "),a.next=3,this.getTitle();case 3:return e=a.sent,a.next=6,this.storageService.saveAlankar(Object.assign(Object.assign({},this.alankar),{title:e||t,date:(new Date).getTime()}));case 6:this.nav.navigateRoot("/saved");case 7:case"end":return a.stop()}}),a,this)})))}},{key:"getTitle",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var t;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.alertController.create({cssClass:"alankar-title",header:"Alankar Name",inputs:[{name:"title",type:"text",placeholder:"Name your Alankar"}],buttons:[{text:"Cancel",role:"cancel",handler:function(){}},{text:"Save",handler:function(){}}]});case 2:return t=a.sent,a.next=5,t.present();case 5:return a.next=7,t.onDidDismiss();case 7:return a.abrupt("return",a.sent.data.values.title);case 8:case"end":return a.stop()}}),a,this)})))}}]),a}(),d.\u0275fac=function(a){return new(a||d)(b.Jb(o.a),b.Jb(o.i),b.Jb(i.G),b.Jb(h.a),b.Jb(h.c),b.Jb(i.a))},d.\u0275cmp=b.Db({type:d,selectors:[["app-preview"]],decls:26,vars:7,consts:[[3,"translucent"],["slot","start"],[3,"fullscreen","scrollX"],[1,"phrase-title"],[4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","edge","","slot","fixed",4,"ngIf"],[3,"click"],["slot","start","name","share-social"],["class","phrase-swara",4,"ngFor","ngForOf"],[1,"phrase-delimeter"],[1,"phrase-swara"],["vertical","bottom","horizontal","end","edge","","slot","fixed"],[1,"fab-button",3,"click"],["slot","start","name","checkmark"]],template:function(a,t){1&a&&(b.Mb(0,"ion-header",0),b.Mb(1,"ion-toolbar"),b.Mb(2,"ion-buttons",1),b.Kb(3,"ion-back-button"),b.Lb(),b.Mb(4,"ion-title"),b.kc(5),b.Lb(),b.Lb(),b.Lb(),b.Mb(6,"ion-content",2),b.Mb(7,"ion-list"),b.Mb(8,"ion-list-header"),b.Mb(9,"ion-label"),b.Mb(10,"span",3),b.kc(11,"Aaroh"),b.Lb(),b.Lb(),b.Lb(),b.ic(12,p,4,1,"ion-item",4),b.Lb(),b.Mb(13,"ion-list"),b.Mb(14,"ion-list-header"),b.Mb(15,"ion-label"),b.Mb(16,"span",3),b.kc(17,"Avroh"),b.Lb(),b.Lb(),b.Lb(),b.ic(18,v,4,1,"ion-item",4),b.Lb(),b.ic(19,k,4,0,"ion-fab",5),b.Lb(),b.Mb(20,"ion-footer"),b.Mb(21,"ion-toolbar"),b.Mb(22,"ion-buttons",1),b.Mb(23,"ion-button",6),b.Ub("click",(function(){return t.share()})),b.Kb(24,"ion-icon",7),b.kc(25," Share "),b.Lb(),b.Lb(),b.Lb(),b.Lb()),2&a&&(b.bc("translucent",!0),b.zb(5),b.lc(t.title||"Alankar Preview"),b.zb(1),b.bc("fullscreen",!0)("scrollX",!0),b.zb(6),b.bc("ngForOf",t.aaroh),b.zb(6),b.bc("ngForOf",t.avroh),b.zb(1),b.bc("ngIf",!t.alreadySaved))},directives:[i.m,i.D,i.h,i.e,i.f,i.B,i.j,i.q,i.r,i.p,r.j,r.k,i.l,i.g,i.n,i.o,i.k],styles:[".phrase-title[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-size:large;font-weight:700}.phrase-swara[_ngcontent-%COMP%]:not(:first-child){margin-left:16px}ion-item[_ngcontent-%COMP%]:last-child   .phrase-delimeter[_ngcontent-%COMP%]{display:none}ion-content[_ngcontent-%COMP%]::part(scroll){margin-bottom:32px}ion-fab[_ngcontent-%COMP%]{width:120px;right:8px;bottom:-16px}ion-fab[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]::part(native){border-radius:32px;padding:24px}"]}),d)},{path:"**",redirectTo:""}],y=((m=function a(){_classCallCheck(this,a)}).\u0275mod=b.Hb({type:m}),m.\u0275inj=b.Gb({factory:function(a){return new(a||m)},imports:[[o.k.forChild(M)],o.k]}),m),C=((g=function a(){_classCallCheck(this,a)}).\u0275mod=b.Hb({type:g}),g.\u0275inj=b.Gb({factory:function(a){return new(a||g)},imports:[[r.b,n.a,i.E,y]]}),g)}}]);